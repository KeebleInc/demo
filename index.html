<!DOCTYPE html>

<html>

<head>

<meta name='impact-site-verification' value='ce647cac-b525-4095-8c50-913ec84adbec'>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PG98WLVP');</script>
<!-- End Google Tag Manager -->  

</head>

<!-- This needs to be placed in html tag for verification as Media Partner -->
<!-- this generates a click ID for the landing page -->
<meta name='ir-site-verification-token' value='-1828744636'>
  
<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PG98WLVP"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->  
<!-- The identify function is used to identify users as accurately across your site -->
  
<script type="text/javascript">
               ire('identify', {customerId: '10001', customerEmail: ''});
</script>

<!-- The trackConversion function is used on your site order confirmation page to track the conversion data of an online sale and report it to impact.com -->


<script type="text/javascript">
  ire('trackConversion', 39382, {
    orderId: "",
    customerId: "10001",
    customerEmail: '',
    customerStatus: "New",
    currencyCode: "ZAR",
    orderPromoCode: "ChildTest",
    orderDiscount: 1.00,
    items: [
      {
        subTotal: 23.00,
        category: "Product Category 33",
        sku: "sku-1333",
        quantity: 3,
        name: "Books"
      },
      {
        subTotal: 94.00,
        category: "Product Category 44",
        sku: "sku-444",
        quantity: 1,
        name: "Binders"
      }
    ]
  },
  {
    verifySiteDefinitionMatch: true
  });
</script>

<h1>DEMO BRAND SETUP</h1>

<script>
// Pull out URL and get params from URL
var url = new URL(document.URL);
var orderId_val = url.searchParams.get('orderId');
var customerId_val = url.searchParams.get('customerId');

// Initialize data layer
var dataLayer = [];
var dataLayertest = [
  {
    subTotal: 30.00,
    category: "testcat",
    sku: "sku-123",
    quantity: 1,
    name: "skuname_test"
  },
  {
    subTotal: 50.00,
    category: "Product Category 44",
    sku: "sku-321",
    quantity: 1,
    name: "skuname_test2"
  }
];

// Push values to data layer
dataLayer.push({ key: orderId_val, value: customerId_val });

// API request function
function APILocation() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      console.log(this.responseText);
      alert(this.responseText);
    }
  };
  xhttp.open("GET", "https://httpbin.org/get?key=" + dataLayer[0].key + "&value=" + dataLayer[0].value, true);
  xhttp.send();
}

// UTT Tracker Event function
function UTT_TrackerEvent() {
  ire('trackConversion', 39382, {
    orderId: orderId_val,
    customerId: customerId_val,
    customerEmail: '',
    customerStatus: "New",
    currencyCode: "ZAR",
    orderPromoCode: "GTMRfo",
    orderDiscount: 1.00,
    items: [
      {
        subTotal: 30.00,
        category: "Product Category 33",
        sku: "sku-1333",
        quantity: 1,
        name: "Books"
      },
      {
        subTotal: 50.00,
        category: "Product Category 44",
        sku: "sku-1444",
        quantity: 1,
        name: "Binders"
      }
    ]
  },
  {
    verifySiteDefinitionMatch: true
  });
}

// UTT Tracker Event Test function
function UTT_TrackerEventTest() {
  ire('trackConversion', 39382, {
    orderId: orderId_val,
    customerId: customerId_val,
    customerEmail: '',
    customerStatus: "New",
    currencyCode: "ZAR",
    orderPromoCode: "GTMRfo",
    orderDiscount: 1.00,
    items: dataLayertest
  },
  {
    verifySiteDefinitionMatch: true
  });
}

// GTM Tracker Event Test function
function GTM_TrackerEventTest() {
  ire('trackConversion', 39382, {
    orderId: "{{orderId}}",
    customerId: "{{customerId}}",
    customerEmail: '',
    customerStatus: "{{customerStatus}}",
    currencyCode: "{{currencyCode}}",
    items: dataLayertest
  },
  {
    verifySiteDefinitionMatch: true
  });
}
</script>

<button onclick ="UTT_TrackerEvent()">
         UTT
</button>

  <button onclick ="GTM_TrackerEventTest()">
         GTM
</button>
  
<button onclick ="APILocation()">
         GET API
      </button>

<br>
  

  
</body>
</html>


